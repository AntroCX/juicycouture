$(function(){window.skuInCart={};var a=".b-page__loader",t=$("body");$('[data-toggle="tooltip"]').tooltip(),t.on("click",".b-catalog__sizes-item",function(a){var t=$(this),i=t.data("offerid"),o=i,e=t.data("url");quantity=1,t.hasClass("added")||(t.addClass("added"),a.preventDefault(),BX.showWait(),e="/local/ajax/update_small_cart.php",$.get(e,{action:"ADD2BASKET",quantity:quantity,id:i,ajax_basket:"Y"}).done(function(){if(window.cartId.action="add",void 0!==window.digitalData.events&&void 0!==o){var a=null,e=t.parents(".b-catalog__goods-item").data("product-id");if(!a&&void 0!==window.digitalData.listing)for(var d=0;d<window.digitalData.listing.items.length;d++)if(window.digitalData.listing.items[d].id==e){a=window.digitalData.listing.items[d];break}if(a){var n={};if(n.event="added",n.product=a,void 0!==window.digitalData.events&&void 0!==o&&"added"==n.event){var l=1;for(var c in window.digitalData.cart.lineItems)n.product.id==window.digitalData.cart.lineItems[c]&&(l=window.digitalData.cart.lineItems[c].quantity+1);window.digitalData.events.push({category:"Ecommerce",name:"Added Product",product:{id:n.product.id,skuCode:i+""},quantity:1*l})}}}BX.onCustomEvent("OnBasketChange"),skuInCart[o]=!0}))}),t.on("click",".b-catalog__goods-item-colors-item",function(){var a=$(this),t=a.attr("data-href");a.addClass("active"),a.parent(".b-catalog__goods-item-colors").find(".b-catalog__goods-item-colors-item").not(a).removeClass("active"),a.parents(".b-catalog__goods-item").find(".b-catalog__goods-item-wrapper-sku-element").each(function(){var a=$(this);a.attr("data-sku")==t?a.addClass("active"):a.removeClass("active")})}),t.on("click",".b-catalog .b-pagination a",function(t){var i=$(this).attr("href"),o=i;i=addParamToURL(i,"ajax","Y"),$(a).addClass("show"),$.get(i).done(function(t){$(a).removeClass("show"),$(".b-catalog").replaceWith(t),changeURL(o)}),t.preventDefault()}),t.on("click",".b-catalog__views a:not(.active)",function(t){var i=$(this).attr("href")+"&ajax=Y";t.preventDefault(),$(a).addClass("show"),$.get(i).done(function(t){$(a).removeClass("show"),$(".b-catalog").replaceWith(t)})}),t.on("click",".b-catalog__goods-item-quick",function(a){var t=$(this),i=t.attr("href"),o=t.data("product-id");a.preventDefault();var e=i,d={prod_id:o};$.post("/local/templates/main/components/bitrix/catalog/main/fastview_ajax.php",d).done(function(a){var i=$("#quickViewProduct");if(i.find(".modal-content").html(a),window.skuInCart={},setSKU(runSlick),setTimeout(function(){$(".b-catalog-detail__photos-list-nav-item:nth-child(2)").trigger("click")},200),$(".b-catalog-detail__reservation-all").on("click",function(){window.location=e+"#stores"}),$(".b-catalog-detail__count-to-shops a").attr("href",e+"#stores"),i.modal("show"),void 0!==window.digitalData.events){var o=t.parents(".b-catalog__goods-item").data("product-id"),d=t.data("list-id"),n=null;if(void 0===window.digitalData.listing||"main"!=d){for(l=0;l<window.digitalData.recommendation.length;l++)if(window.digitalData.recommendation[l].listId==d){n=window.digitalData.recommendation[l].items;break}}else n=window.digitalData.listing.items;if(n)for(var l=0;l<n.length;l++)n[l].id==o&&window.digitalData.events.push({category:"Ecommerce",name:"Viewed Product Detail",product:n[l]})}})}),t.on("hidden.bs.modal","#quickViewProduct",function(){$("#quickViewProduct").find(".modal-content").empty()}),$(document).on("click",".b-pagination a",function(){var a=$(".b-catalog").offset().top;$("html, body").delay(100).animate({scrollTop:a},1e3)})});
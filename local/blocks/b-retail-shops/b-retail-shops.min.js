function mapInit(e){ymaps.ready(function(){$("#YMapsID");var a=[],o=new ymaps.Map("YMapsID",{controls:[],center:[e[0],e[1]],zoom:3},{searchControlProvider:!1});o.controls.add(new ymaps.control.ZoomControl);var t=[];$(".i-yandex-map__item").each(function(){var e=$(this),n={};coordsShop=e.attr("data-coords").split(","),nameShop=e.attr("data-name"),cityShop=e.attr("data-city"),n.nameShop=nameShop,n.cityShop=cityShop,n.coordsShop=coordsShop,t.push(n);var r=new ymaps.Placemark([coordsShop[0],coordsShop[1]],{hintContent:nameShop,balloonContent:"<b>"+cityShop+"</b><br>"+nameShop},{iconLayout:"default#image",iconImageHref:"/local/images/mapmarker@x2.png",iconImageSize:[42,42],iconImageOffset:[-3,-42]});a.push(r),o.geoObjects.add(r)});var n=new ymaps.Clusterer({clusterIcons:[{href:"/local/images/klaster@x2.png",size:[42,42],offset:[-3,-42]}]});n.add(a),o.geoObjects.add(n),$(".b-retail-shops__select-city").on("change",function(){o.geoObjects.removeAll(),n.removeAll();var a=$(this).val(),r=[],c=[];-1==a&&o.setCenter([e[0],e[1]],3,{checkZoomRange:!0});for(var s=0,i=t.length;s<i;s++){var m=t[s];if($item=$('body .i-yandex-map__item[data-name="'+m.nameShop+'"]'),a==m.cityShop||-1==a){m.emailShop;var p=m.coordsShop,h=m.nameShop,d=m.cityShop;c=p,$item.parent().removeClass("hidden");var l=new ymaps.Placemark([p[0],p[1]],{hintContent:h,balloonContent:"<b>"+d+"</b><br>"+h},{iconLayout:"default#image",iconImageHref:"/local/images/mapmarker@x2.png",iconImageSize:[42,42],iconImageOffset:[-3,-42]});r.push(l)}else $item.parent().addClass("hidden")}-1!=a&&o.setCenter([c[0],c[1]],8,{checkZoomRange:!0}),n.add(r),o.geoObjects.add(n)}),$(".b-retail-shops__to-map").on("click",function(){var e=$(this).parent().attr("data-coords").split(",");o.setCenter([e[0],e[1]],18,{checkZoomRange:!0})})})}$(function(){mapInit([61.698653,99.505405])});
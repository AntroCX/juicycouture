function addParamToURL(t,e,a){return-1==t.indexOf("?")?t+="?":t+="&",t+=e+"="+a}function changeURL(t){var e=$(document).find("title").text();t=(t=t.replace("ajax=Y","")).replace("filter/clear/apply/",""),history.pushState("",e,t)}function checkConfirm(){var t=$("#confirmorder");return"Y"===(t.length>0?t.val():"Y")}function checkPlugins(){$.isFunction($.fn.validate)||(console.log("validate plugin error"),$.getScript("/bitrix/templates/redesign/js/validate/jquery.validate.min.js")),$.isFunction($.fn.validate)||(console.log("plugins error"),location.href=location.pathname)}function fillFormFields(){var t=["#ORDER_PROP_1",'#basket-fastbuy input[name="fio"]','#reservedInStore input[name="RESERVED_NAME"]',"#ORDER_PROP_4",'#basket-fastbuy input[name="phone"]','#reservedInStore input[name="RESERVED_PHONE"]',"#ORDER_PROP_3",'#basket-fastbuy input[name="email"]','#reservedInStore input[name="RESERVED_EMAIL"]'].join(", ");$(t).each(function(){var t=$.trim($(this).val());$(this).data("prev",t)}),$(document).on("blur",t,function(){var t=$(this),e=$.trim(t.val());if(!e||e==t.data("prev"))return!1;t.data("prev",e);var a="cart";t.closest("#basket-fastbuy").length&&(a="1-step-cart"),t.closest("#reservedInStore").length&&(a="reservation");var n="Entered Name in Checkout Form";"phone"!=t.attr("name")&&"RESERVED_PHONE"!=t.attr("name")&&"ORDER_PROP_4"!=t.attr("id")||(n="Entered Phone in Checkout Form"),"email"!=t.attr("name")&&"RESERVED_EMAIL"!=t.attr("name")&&"ORDER_PROP_3"!=t.attr("id")||(n="Entered Email in Checkout Form"),void 0!==window.digitalData.events&&setTimeout(function(){var e=t.closest("div").find("label.error-notify:visible").length>0;t.val().length>0&&!e&&digitalData.events.push({category:"Behaviour",name:n,label:a})},100,t)})}function initTopSearch(){var t=$(".b-header__search-block"),e=t.find(".search-dropdown"),a=t.find(".form-control");a.on("focusout",function(){}),a.on("keyup change focus",function(){if(a.val().length>=3){var n=t.data("ajax");n&&n.abort(),n=$.get("/local/ajax/search.php",{q:a.val()},function(t){if(e.html("").hide(),t.length){for(_i in t)e.append('<a href="'+t[_i].LINK+'"><span>'+t[_i].PRICES.SALE+"</span>"+t[_i].NAME+" "+t[_i].ARTICLE+"</a>");e.show()}},"json"),t.data("ajax",n)}}),$(document).on("mouseup",function(t){e.is(t.target)||0!==e.has(t.target).length||e.html("").hide()})}function _adjustWait(){if(this.bxmsg){var t=BX.pos(this),e=t.top;e<BX.GetDocElement().scrollTop&&(e=BX.GetDocElement().scrollTop+5),this.bxmsg.style.top=e+5+"px",this==BX.GetDocElement()?this.bxmsg.style.right="5px":this.bxmsg.style.left=t.right-this.bxmsg.offsetWidth-5+"px"}}function scrollToAnchor(t){var e=$("a[name='"+t+"']");$("html,body").animate({scrollTop:e.offset().top},"slow")}function maskPhone(t){navigator.userAgent.toLowerCase().indexOf("android")>-1?t.mask("+79999999999"):t.mask("+7(999)999-99-99")}function addDateMask(t){t.mask("99.99.9999"),t.each(function(){var t=$(this);checkDateInput(t),t.on("blur change",function(){checkDateInput(t)})})}function checkDateInput(t){var e=t.val();checkDateNumber(e=e.replace(/\//g,"."))||t.val("")}function checkDateNumber(t){return/^\d{2}.\d{2}.\d{4}$/i.test(t)}function showMessage(t,e){var a=$("#messageModal");a.find(".modal-header h3").html(t),a.find(".modal-body").html("<p>"+e+"</p>"),a.modal("show")}$(function(){checkPlugins(),$.validator.setDefaults({errorClass:"error-notify",errorPlacement:function(t,e){"radio"==e.attr("type")?t.insertAfter(e.parents(".form-group")):"checkbox"==e.attr("type")?t.insertAfter(e.parents(".checkbox")):e.hasClass("bx-ui-sls-fake")||e.hasClass("dropdown-field")?t.insertAfter(e.parents(".bx-ui-sls-input-block").next()):t.insertAfter(e)}}),$.extend($.validator.messages,{required:"Это поле необходимо заполнить",remote:"Исправьте это поле чтобы продолжить",email:"Введите правильный email адрес.",url:"Введите верный URL.",date:"Введите правильную дату.",dateISO:"Введите правильную дату (ISO).",number:"Введите число.",digits:"Введите только цифры.",creditcard:"Введите правильный номер вашей кредитной карты.",equalTo:"Повторите ввод значения еще раз.",accept:"Пожалуйста, введите значение с правильным расширением.",maxlength:$.validator.format("Не более {0} символов."),minlength:$.validator.format("Минимальное количество символов {0}."),rangelength:$.validator.format("Введите значения от {0} до {1}."),range:$.validator.format("Введите значение между {0} и {1}."),max:$.validator.format("Введите значение меньше {0}."),min:$.validator.format("введите значение больше {0}.")}),$.validator.addMethod("phoneFormat",function(t,e){return-1==t.indexOf("+7(89")&&-1==t.indexOf("+7 (89")&&-1==t.indexOf("+789")},"Проверьте корректность номера телефона"),$.validator.addMethod("mailFormat",function(t,e){return!checkConfirm()||/^[a-z-0-9_/.]+@[a-z-0-9]+\.[a-z]{2,3}$/.test(t)},"Некорректный E-mail"),$.validator.addMethod("numFormat",function(t,e){return!checkConfirm()||/^[0-9]+$/.test(t)},"Некорректный номер"),$.validator.addMethod("nameFormat",function(t,e){return!checkConfirm()||/^[a-zA-Zа-яА-Я ]+$/.test(t)},"Вводите только буквы"),addDateMask($(".mask-date")),maskPhone($(".mask-phone")),initTopSearch(),fillFormFields(),$(".btn-star").on("click",function(){var t=$(this),e=$(this).find("input:radio").attr("title");t.prevAll().addClass("selected"),t.nextAll().removeClass("selected"),t.parent().next(".btn-star__value").html(e)}),$(".b-page__footer-wrapper").on("click",".b-page__footer-menu-category a",function(){var t=$(this),e=t.parent().parent().find("li").not(".b-page__footer-menu-category");"false"==t.attr("aria-expanded")?(t.attr("aria-expanded",!0),e.show("slow")):(t.attr("aria-expanded",!1),e.hide("slow"))})});var lastWait=[];BX.showWait=function(t,e){t=BX(t)||document.body||document.documentElement,e=e||BX.message("JS_CORE_LOADING");var a=t.id||Math.random(),n=t.bxmsg=document.body.appendChild(BX.create("DIV",{props:{id:"wait_"+a,className:"bx-core-waitwindow"},text:e}));return setTimeout(BX.delegate(_adjustWait,t),10),lastWait[lastWait.length]=n,n},BX.closeWait=function(t,e){if(t&&!e&&(e=t.bxmsg),t&&!e&&BX.hasClass(t,"bx-core-waitwindow")&&(e=t),t&&!e&&(e=BX("wait_"+t.id)),e||(e=lastWait.pop()),e&&e.parentNode){for(var a=0,n=lastWait.length;a<n;a++)if(e==lastWait[a]){lastWait=BX.util.deleteFromArray(lastWait,a);break}e.parentNode.removeChild(e),t&&(t.bxmsg=null),BX.cleanNode(e,!0)}},$(document).ready(function(){$(window).scroll(function(){$(this).scrollTop()>1500?$("#button-up").fadeIn():$("#button-up").fadeOut()}),$("#button-up").click(function(){return $("body,html").animate({scrollTop:0},500),!1})});